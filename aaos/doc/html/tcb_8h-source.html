<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Double A O.S.: include/tcb.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>include/tcb.h</h1><a href="tcb_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00004"></a>00004 <span class="preprocessor">#ifndef _TCB_H</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">#define _TCB_H</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="libumps_8h.html" title="Library for the uMPS simulator.">libumps.h</a>"</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="arch_8h.html" title="Architecture constants and macros.">arch.h</a>"</span>
<a name="l00008"></a>00008 
<a name="l00019"></a><a class="code" href="group__TCB.html#gb9eade334fd8a98c128802aec7e9191c">00019</a> <span class="preprocessor">#define MAXTHREADS 128</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00022"></a><a class="code" href="structtcb__t.html">00022</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> {
<a name="l00023"></a>00023         <span class="comment">/* Thread queue fields. */</span>
<a name="l00025"></a><a class="code" href="structtcb__t.html#8257de8d55588ee9ad1a7d1ecaa44be3">00025</a>         <span class="keyword">struct </span><a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *<a class="code" href="structtcb__t.html#8257de8d55588ee9ad1a7d1ecaa44be3" title="Pointer to next entry into thread queue.">t_next</a>;
<a name="l00027"></a><a class="code" href="structtcb__t.html#8e326f05416a7532fccdac3edee631cb">00027</a>         <span class="keyword">struct </span><a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *<a class="code" href="structtcb__t.html#8e326f05416a7532fccdac3edee631cb" title="Pointer to previous entry into thread queue.">t_prev</a>;
<a name="l00028"></a>00028                 
<a name="l00029"></a>00029         <span class="comment">/* Thread tree fields. */</span>
<a name="l00031"></a><a class="code" href="structtcb__t.html#a2ff5705bc779b66fe3db3e012861704">00031</a>         <span class="keyword">struct </span><a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *<a class="code" href="structtcb__t.html#a2ff5705bc779b66fe3db3e012861704" title="Parent thread.">t_parent</a>;
<a name="l00033"></a><a class="code" href="structtcb__t.html#1f8998750a86eb90eae4125b338bf662">00033</a>         <span class="keyword">struct </span><a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *<a class="code" href="structtcb__t.html#1f8998750a86eb90eae4125b338bf662" title="Next sibling thread.">t_next_sibling</a>;
<a name="l00035"></a><a class="code" href="structtcb__t.html#8c06caca0fb8fec04c0a15c10aa4758b">00035</a>         <span class="keyword">struct </span><a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *<a class="code" href="structtcb__t.html#8c06caca0fb8fec04c0a15c10aa4758b" title="Previous sibling thread.">t_prev_sibling</a>;
<a name="l00037"></a><a class="code" href="structtcb__t.html#1b69437cd68b5faf93661c67120ca636">00037</a>         <span class="keyword">struct </span><a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *<a class="code" href="structtcb__t.html#1b69437cd68b5faf93661c67120ca636" title="First child.">t_first_child</a>;
<a name="l00039"></a><a class="code" href="structtcb__t.html#6e469d622db39dcc7fac75845a783689">00039</a>         <span class="keyword">struct </span><a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *<a class="code" href="structtcb__t.html#6e469d622db39dcc7fac75845a783689" title="Last child.">t_last_child</a>;
<a name="l00040"></a>00040         
<a name="l00042"></a><a class="code" href="structtcb__t.html#4d8757fb735e702d75029812921b2a55">00042</a>         <span class="keyword">struct </span><a class="code" href="structmsg__t.html" title="Message Block structure.">msg_t</a> *<a class="code" href="structtcb__t.html#4d8757fb735e702d75029812921b2a55" title="Thread&amp;#39;s message queue.">inbox</a>;
<a name="l00043"></a>00043                 
<a name="l00045"></a><a class="code" href="structtcb__t.html#f88c72fed0baa245bb086d0373654722">00045</a>         state_t <a class="code" href="structtcb__t.html#f88c72fed0baa245bb086d0373654722" title="Processor state.">proc_state</a>;
<a name="l00046"></a>00046         
<a name="l00048"></a><a class="code" href="structtcb__t.html#9e416c666f27a53e16ad4decd7f5ec73">00048</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structtcb__t.html#9e416c666f27a53e16ad4decd7f5ec73" title="Program total cpu time.">cpu_time</a>;
<a name="l00049"></a>00049         
<a name="l00051"></a><a class="code" href="structtcb__t.html#f4e0c7a419f68c7c1cea1a52015eddd1">00051</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structtcb__t.html#f4e0c7a419f68c7c1cea1a52015eddd1" title="Program trap manager.">trap_manager</a>;
<a name="l00052"></a>00052         
<a name="l00054"></a><a class="code" href="structtcb__t.html#771f6103ad9d8fd1dd52bfd9bc59fec9">00054</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structtcb__t.html#771f6103ad9d8fd1dd52bfd9bc59fec9" title="TLB manager.">tlb_manager</a>;
<a name="l00055"></a>00055         
<a name="l00057"></a><a class="code" href="structtcb__t.html#8f527e01a3e602e016297090a5d1ee41">00057</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structtcb__t.html#8f527e01a3e602e016297090a5d1ee41" title="System call manager.">syscall_manager</a>;
<a name="l00058"></a>00058 } <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>;
<a name="l00059"></a>00059 
<a name="l00075"></a>00075 <span class="keywordtype">void</span> <a class="code" href="group__TCBmem.html#g017e5f8461ee161b707393cd9bd84fed" title="Initialize the Thread Control Block memory area.">initTcbs</a>();
<a name="l00076"></a>00076 
<a name="l00081"></a>00081 <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>* <a class="code" href="group__TCBmem.html#gff5166483114b6024ae541e94a101d99" title="Allocate a TCB, if possible.">allocTcb</a>();
<a name="l00082"></a>00082 
<a name="l00086"></a>00086 <span class="keywordtype">void</span> <a class="code" href="group__TCBmem.html#g83be513903657bcfb3b666b0d4322ba6" title="Free a TCB.">freeTcb</a>(<a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t);
<a name="l00087"></a>00087 
<a name="l00092"></a>00092 <span class="keywordtype">int</span> <a class="code" href="group__TCBmem.html#g21fd507bfbf7766cc124a392cd19c711" title="Get a TCB&amp;#39;s identifier.">getTcbID</a>(<span class="keyword">const</span> <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t);
<a name="l00105"></a>00105 <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>* <a class="code" href="group__TCBQ.html#g1a7e81f6fb254405233d673bf248f316" title="Create an empty Thread Queue.">mkEmptyThreadQ</a>();
<a name="l00106"></a>00106 
<a name="l00111"></a>00111 <span class="keywordtype">int</span> <a class="code" href="group__TCBQ.html#ga003f6793c82cd126d02042d6d8a3ae2" title="Test whether or not a Thread Queue is empty.">emptyThreadQ</a>(<span class="keyword">const</span> <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *tq);
<a name="l00112"></a>00112 
<a name="l00117"></a>00117 <span class="keywordtype">void</span> <a class="code" href="group__TCBQ.html#g610146841f9ecf0f7c0353c35e77860a" title="Enqueue a TCB into a Thread Queue.">insertThread</a>(<a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> **tq, <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t_ptr);
<a name="l00118"></a>00118 
<a name="l00123"></a>00123 <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>* <a class="code" href="group__TCBQ.html#g05ff4f08a6b708bca0ee8d3e72f232ce" title="Extract the outgoing TCB from a queue.">removeThread</a>(<a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> **tq);
<a name="l00124"></a>00124 
<a name="l00133"></a>00133 <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>* <a class="code" href="group__TCBQ.html#gfa329b21b50fcc6d94ebb88a58ce3a4f" title="Remove a TCB from a queue.">outThread</a>(<a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> **tq, <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t_ptr);
<a name="l00134"></a>00134 
<a name="l00139"></a>00139 <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>* <a class="code" href="group__TCBQ.html#gc25bdd300e136290e8c6bf5fe429baf6" title="Return the outgoing TCB.">headThread</a>(<span class="keyword">const</span> <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *tq);
<a name="l00140"></a>00140 
<a name="l00146"></a>00146 <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>* <a class="code" href="group__TCBQ.html#ga75becb6daccb739807b284e5cbd53ac" title="Search in a queue for a TCB.">searchThread</a>(<span class="keyword">const</span> <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *tq, <span class="keyword">const</span> <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t);
<a name="l00163"></a>00163 <span class="keywordtype">int</span> <a class="code" href="group__TCBtree.html#gc01d0e973c3b483a6274a3902d26c5b5" title="Test whether or not a thread has children.">emptyChild</a>(<span class="keyword">const</span> <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t_ptr);
<a name="l00164"></a>00164 
<a name="l00169"></a>00169 <span class="keywordtype">void</span> <a class="code" href="group__TCBtree.html#gcf76c9ece06baec57704f4c4474fad34" title="Append a child to a thread.">insertChild</a>(<a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *parent, <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t_ptr);
<a name="l00170"></a>00170 
<a name="l00175"></a>00175 <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>* <a class="code" href="group__TCBtree.html#gbbf9ea50ce9deaca971a961b41f19df3" title="Remove the first child of a thread.">removeChild</a>(<a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t_ptr);
<a name="l00176"></a>00176 
<a name="l00181"></a>00181 <a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a>* <a class="code" href="group__TCBtree.html#g4e3f5bf2857c4dfb5dcdad00012965c7" title="Make a thread no longer the child of its parent.">outChild</a>(<a class="code" href="structtcb__t.html" title="Thread Control Block structure.">tcb_t</a> *t_ptr);
<a name="l00185"></a>00185 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Dec 21 17:21:05 2008 for Double A O.S. by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
